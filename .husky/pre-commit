#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Build and lint
pnpm install && pnpm build:check && pnpm eslint . && pnpm test

# Self-test: Run gitingest on its own repo
REPO_URL=$(gh repo view --json url -q .url)
echo "Running self-test on $REPO_URL..."
./dist/index.js "$REPO_URL" --pipe || exit 1
